<div class="p-6">
  <h2 class="text-2xl font-bold mb-6 text-gray-800">Register New User</h2>
  <h3 *ngIf="successfulRegister" role="status" aria-live="polite" class="text-green-700 mb-6">
    <span class="font-semibold">User registered successfully!</span>
    <span class="ml-1"
      >Check<a href="/display-users" class="ml-1 font-medium underline hover:text-green-800"
        >User List</a
      >
    </span>
  </h3>
  <form (ngSubmit)="onSubmit()" class="space-y-4">
    <div class="grid grid-cols-2 gap-4">
      <div>
        <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Name</label>
        <input
          [(ngModel)]="newUser.name"
          name="name"
          required
          class="w-full border border-gray-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none"
        />
      </div>
      <div>
        <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Surname</label>
        <input
          [(ngModel)]="newUser.surname"
          name="surname"
          required
          class="w-full border border-gray-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none"
        />
      </div>
    </div>

    <div class="grid grid-cols-2 gap-4">
      <div>
        <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Gender</label>
        <select
          [(ngModel)]="newUser.gender"
          name="gender"
          class="w-full border border-gray-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none"
        >
          <option value="M">Male</option>
          <option value="F">Female</option>
        </select>
      </div>
      <div>
        <label class="block text-xs font-bold text-gray-500 uppercase mb-1">Birthdate</label>
        <input
          type="date"
          [(ngModel)]="newUser.birthdate"
          name="birthdate"
          class="w-full border border-gray-300 rounded px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none"
        />
      </div>
    </div>

    <div class="border-t pt-4 mt-2">
      <div class="flex justify-between items-center mb-2">
        <h3 class="text-sm font-bold text-gray-700 uppercase">Addresses</h3>
        <button
          type="button"
          (click)="addAddress()"
          class="text-xs bg-green-50 text-green-600 border border-green-200 px-3 py-1 rounded hover:bg-green-100 font-medium transition"
        >
          + Add New
        </button>
      </div>

      <div class="space-y-2 max-h-40 overflow-y-auto pr-1">
        <div *ngIf="newUser.addresses.length === 0" class="text-gray-400 text-xs italic">
          No addresses added yet.
        </div>

        <div *ngFor="let addr of newUser.addresses; let i = index" class="flex gap-2 items-center">
          <select
            [(ngModel)]="addr.addressType"
            name="addressType{{ i }}"
            class="border border-gray-300 rounded px-2 py-1 text-sm w-24 focus:outline-none"
          >
            <option value="home">Home</option>
            <option value="work">Work</option>
          </select>

          <input
            [(ngModel)]="addr.addressText"
            name="addressText{{ i }}"
            placeholder="Enter address..."
            class="border border-gray-300 rounded px-2 py-1 text-sm grow focus:outline-none focus:border-blue-400"
          />

          <button
            type="button"
            (click)="removeAddress(i)"
            class="text-red-400 hover:text-red-600 px-2 text-xl leading-none"
          >
            Ã—
          </button>
        </div>
      </div>
    </div>

    <div class="pt-4 mt-4 border-t">
      <button
        type="submit"
        class="w-full bg-blue-600 text-white font-medium py-2.5 rounded-lg hover:bg-blue-700 shadow-sm transition transform hover:scale-[1.01]"
      >
        Create User
      </button>
    </div>
  </form>
</div>
